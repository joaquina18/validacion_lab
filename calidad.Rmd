---
title: "Dashboard de Calidad"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(DT)

datos <- read.csv("datos_calidad.csv")

# Selector de Sede
sede_seleccionada <- unique(datos$Sede)

selectInput("sede", "Selecciona Sede:", choices = sede_seleccionada, selected = sede_seleccionada[1])

# Filtrado por sede
datos_filtrados <- datos %>% filter(Sede == input$sede)

cumplimiento_plot <- datos_filtrados %>%
  group_by(Validador.asignado) %>%
  summarise(Cumplimiento = mean(Cumplimiento)) %>%
  plot_ly(x = ~Validador.asignado, y = ~Cumplimiento, type = 'bar')

cumplimiento_plot

datatable(datos_filtrados)
prioridad_plot <- datos_filtrados %>%
  group_by(Prioridad.de.la.prueba) %>%
  summarise(Total = n()) %>%
  plot_ly(labels = ~Prioridad.de.la.prueba, values = ~Total, type = 'pie')

prioridad_plot
cumplimiento_global <- datos_filtrados %>%
  summarise(Promedio_Cumplimiento = mean(Cumplimiento))

plot_ly(x = ~"Cumplimiento Promedio", y = ~cumplimiento_global$Promedio_Cumplimiento, type = 'bar')
